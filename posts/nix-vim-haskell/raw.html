<!doctype html>
<html lang="en">
  <title>Nix, Vim and Haskell</title>
  <body><p>This is how I setup nix-shell environments vim and hakyll.</p>
<p>This is <em>shelll.nix</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode nix"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">{</span> <span class="ex">pkgs</span> ? import <span class="op">&lt;</span>nixpkgs<span class="op">&gt;</span> {<span class="kw">}</span> }:</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="bu">let</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="ex">hs</span> = pkgs.haskellPackages.ghcWithHoogle (self: with self<span class="kw">;</span><span class="bu"> [</span></a>
<a class="sourceLine" id="cb1-5" title="5">          hakyll</a>
<a class="sourceLine" id="cb1-6" title="6">        ]);</a>
<a class="sourceLine" id="cb1-7" title="7">in</a>
<a class="sourceLine" id="cb1-8" title="8">pkgs.stdenv.mkDerivation {</a>
<a class="sourceLine" id="cb1-9" title="9">  name <span class="ot">=</span> <span class="st">&quot;haskell-shell&quot;</span>;</a>
<a class="sourceLine" id="cb1-10" title="10">  buildInputs <span class="ot">=</span> with pkgs.haskellPackages; [ hs cabal-install ghc-mod hlint hspec  ];</a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12">  shellHook <span class="ot">=</span> <span class="st">''</span></a>
<a class="sourceLine" id="cb1-13" title="13">    export PS1=<span class="st">&quot;\[\033[1;32m\][ns-hs:\w]\n$ \[\033[0m\]&quot;</span></a>
<a class="sourceLine" id="cb1-14" title="14">    eval <span class="st">&quot;</span><span class="va">$(</span><span class="fu">egrep</span> ^export <span class="st">&quot;</span><span class="va">$(</span><span class="bu">type</span> -p ghc<span class="va">)</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-15" title="15">  <span class="st">''</span>;</a>
<a class="sourceLine" id="cb1-16" title="16">}</a></code></pre></div>
<p>I use <span class="title-ref">cabal</span> to do the build</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="ex">cabal</span> build</a></code></pre></div></body>
</html>
